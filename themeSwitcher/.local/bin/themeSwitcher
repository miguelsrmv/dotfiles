#!/bin/bash

DATA_DIR="/home/$USER/.local/share/themeSwitcher"
SCRIPT_DIR="$DATA_DIR/scripts"
THEME_DIR="$DATA_DIR/themes"
DOTFILES_DIR="/home/$USER/.dotfiles"

THEME_NAMES=("Tokyo Night" "Catppuccin" "Night Fox" "Gruvbox" "Kanagawa" "Everforest" "OneDarkPro" "Rose Pine" "Nord" )
THEME=$(gum choose "${THEME_NAMES[@]}" --header "Choose your theme" --height 10 | tr '[:upper:]' '[:lower:]' | sed 's/ /-/g')

if [ -n "$THEME" ]; then

	source $THEME_DIR/$THEME/ghostty.sh
	source $SCRIPT_DIR/set-ghostty-theme.sh

	source $THEME_DIR/$THEME/tmux.sh
	source $SCRIPT_DIR/set-tmux-theme.sh

	source $THEME_DIR/$THEME/starship.sh
	source $SCRIPT_DIR/set-starship-theme.sh

	source $THEME_DIR/$THEME/neovim.sh
	source $SCRIPT_DIR/set-nvim-theme.sh

	if [ -f "$THEME_DIR/$THEME/btop.theme" ]; then
		cp $THEME_DIR/$THEME/btop.theme $DOTFILES_DIR/btop/.config/btop/themes/$THEME.theme
		sed -i "s/color_theme = \".*\"/color_theme = \"$THEME\"/g" ~/.config/btop/btop.conf
	else
		sed -i "s/color_theme = \".*\"/color_theme = \"Default\"/g" ~/.config/btop/btop.conf
	fi

	source $THEME_DIR/$THEME/gnome.sh
	source $SCRIPT_DIR/set-gnome-theme.sh

	source $SCRIPT_DIR/reloadApplications.sh
fi

